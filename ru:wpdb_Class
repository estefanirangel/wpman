<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<meta charset="utf-8" />
<!--
<meta property="fb:page_id" content="6427302910" />
-->
<meta name="google-site-verification" content="7VWES_-rcHBcmaQis9mSYamPfNwE03f4vyTj4pfuAw0" />
<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.5" />
		<meta name="keywords" content="Class Reference/ru:wpdb Class,Class Reference,Class Reference/WP Query,Class Reference/wpdb,Custom Fields,Data Validation,Database Description,Displaying Posts Using a Custom Select Query,Function Reference,Function Reference/add meta,Function Reference/delete post meta" />
		<link rel="canonical" href="/Class_Reference/ru:wpdb_Class" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Codex (en)" />
		<link rel="alternate" type="application/rss+xml" title="Codex RSS feed" href="/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Codex Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<title>Class Reference/ru:wpdb Class &laquo; WordPress Codex</title>

<link rel="stylesheet" href="//wordpress.org/style/codex-wp4.css?3" />
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,300,600&subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//wordpress.org/style/wp4.css?36" />
<link media="only screen and (max-device-width: 480px)" href="//wordpress.org/style/iphone.css" type="text/css" rel="stylesheet" />
<link rel="shortcut icon" href="//wordpress.org/favicon.ico?3" type="image/x-icon" />

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-52447-1");
pageTracker._initData();
pageTracker._trackPageview();
function recordOutboundLink(link, category, action) {
  pageTracker._trackEvent(category, action);
  setTimeout('document.location = "' + link.href + '"', 100);
}
</script>
<!--[if lte IE 8]>
<style type="text/css">
@import url("//wordpress.org/style/ie.css?1");
</style>
<![endif]-->
<script type="text/javascript" src="//wordpress.org/wp-includes/js/jquery/jquery.js"></script>
<script>document.cookie='devicePixelRatio='+((window.devicePixelRatio === undefined) ? 1 : window.devicePixelRatio)+'; path=/';</script>
<!--[if IE]>
    <script type="text/javascript" src="/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" />
<![endif]-->

<script type="text/javascript" src="/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=codex"></script>
<script type="text/javascript">wgBreakFrames=false;wgContentLanguage='en';</script>
<script type="text/javascript" src="/skins/common/wikibits.js"></script>

</head>

<body id="wordpress-org" >
<div id="header">
	<div class="wrapper">
		<h1><a href="//wordpress.org">WordPress.org</a></h1>				<div id="head-search">
		<form action="http://wordpress.org/search/do-search.php" method="get">
			<input class="text" name="search" type="text" value="" maxlength="150" placeholder="Search WordPress.org" /> <input type="submit" class="button" value="" />
		</form>
		</div>
				<div style="clear:both"></div>
		
<ul>
<li><a href='http://wordpress.org/showcase/' title='See some of the sites built on WordPress.'>Showcase</a></li>
<li><a href='http://wordpress.org/extend/themes/' title='Find just the right look for your website.'>Themes</a></li>
<li><a href='http://wordpress.org/extend/plugins/' title='Plugins can extend WordPress to do almost anything you can imagine.'>Plugins</a></li>
<li><a href='http://wordpress.org/extend/mobile/' title='Take your website on the go!'>Mobile</a></li>
<li><a href='http://wordpress.org/support/' title='Forums, documentation, help.' class="current">Support</a><ul class="nav-submenu"><li><a href='http://wordpress.org/support/' title='Support and discussion forums.'>Forums</a></li><li><a href='http://codex.wordpress.org/Main_Page' title='Documentation, tutorials, best practices.'>Documentation</a></li></ul><div class="uparrow"></div></li>
<li><a href='http://make.wordpress.org/' title='Contribute your knowledge.'>Get Involved</a><ul class="nav-submenu"><li><a href='http://make.wordpress.org/core/' title='Write the code.'>Core</a></li><li><a href='http://make.wordpress.org/ui/' title='Improve the interface.'>UI</a></li><li><a href='http://make.wordpress.org/accessibility/' title='Create a better experience.'>Accessibility</a></li><li><a href='http://make.wordpress.org/plugins/' title='Extend the system.'>Plugins</a></li><li><a href='http://make.wordpress.org/themes/' title='Beautify the web.'>Themes</a></li><li><a href='http://make.wordpress.org/support/' title='Help the users.'>Support</a></li><li><a href='http://make.wordpress.org/polyglots/' title='Translate for the world.'>Polyglots</a></li><li><a href='http://make.wordpress.org/mobile/' title='On the go.'>Mobile</a></li></ul><div class="uparrow"></div></li>
<li><a href='http://wordpress.org/about/' title='About the WordPress Organization, and where we&#039;re going.'>About</a></li>
<li><a href='http://wordpress.org/news/' title='Come here for the latest scoop.'>Blog</a></li>
<li><a href='http://wordpress.org/hosting/' title='Find a home for your blog.'>Hosting</a></li>
<li id="download" class="button download-button"><a href='http://wordpress.org/download/' title='Get it. Got it? Good.'>Download WordPress</a></li>
</ul>
		<div style="clear:both"></div>
	</div>
</div>


<div id="headline">
	<div class="wrapper">
		<h2>Codex</h2>
		
		<div class="portlet" id="p-personal">
		  <p class="login">Codex tools:
		     <a href="/index.php?title=Special:UserLogin&amp;returnto=Class_Reference/ru:wpdb_Class">Log in</a> 		  </p>
		</div>
	</div>
</div>

<div id="pagebody">
	<div class="wrapper">	
		<div class="col-10" id="bodyContent">
			<div id="siteNotice"><div style="clear:both; background-color:#FCECAD; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto;"><a href="/File:Ambox_notice.png" class="image" title="Ambox notice.png"><img alt="Attention" src="/images/c/c8/Ambox_notice.png" width="40" height="40" border="0" style="vertical-align: middle" /></a> Help us to improve the Codex by filling out our <a href="http://wordpressdotorg.polldaddy.com/s/documentation-survey" class="external text" title="http://wordpressdotorg.polldaddy.com/s/documentation-survey">documentation survey</a>!</div>
</div>			<h2 class="pagetitle">Class Reference/ru:wpdb Class</h2>
									<!-- start content -->
				<div style="clear:both; background-color:#FAEBD7; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle;">Эта страница <a href="/Category:Stubs" title="Category:Stubs">помечена</a> как незавершённая. Вы можете <a href="/Codex:Contributing" title="Codex:Contributing">помочь</a> проекту, <b><a href="http://codex.wordpress.org/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit" class="external text" title="http://codex.wordpress.org/index.php?title=Class_Reference/ru:wpdb_Class&amp;action=edit">дополнив её</a></b>.</div>
<p class="LanguageLinks" style="border:1px solid #CCCCCC; line-height:1.5; text-align:left; color:#333333; font-size:90%; padding:10px;"><span style="white-space:nowrap;"><a href="/Multilingual_Codex" title="Multilingual Codex" class="mw-redirect">Languages</a>:</span> 
<a href="/Function_Reference/wpdb_Class" title="Function Reference/wpdb Class" class="mw-redirect">English</a> • 
<a href="http://wpdocs.sourceforge.jp/%E9%96%A2%E6%95%B0%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9/wpdb_Class" class="external text" title="http://wpdocs.sourceforge.jp/%E9%96%A2%E6%95%B0%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9/wpdb_Class">日本語</a> • 
<a href="/zh-cn:Class_Reference/wpdb" title="zh-cn:Class Reference/wpdb">中文(简体)</a> • 
<a href="/zh-tw:Class_Reference/wpdb" title="zh-tw:Class Reference/wpdb">中文(繁體)</a> • 
<strong class="selflink">Русский</strong> • 

 <small>(<a href="/Multilingual_Codex#Language_Cross_Reference" title="Multilingual Codex" class="mw-redirect">Add your language</a>)</small>
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#.D0.92.D0.B7.D0.B0.D0.B8.D0.BC.D0.BE.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D0.B5_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1</span> <span class="toctext">Взаимодействие с базами данных</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.24wpdb_Object"><span class="tocnumber">1.1</span> <span class="toctext">Использование $wpdb Object</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.91.D0.B0.D0.B7.D0.B5_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">2</span> <span class="toctext">Произвольные Запросы к Базе Данных</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"><span class="tocnumber">2.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#SELECT_a_Variable"><span class="tocnumber">3</span> <span class="toctext">SELECT a Variable</span></a>
<ul>
<li class="toclevel-2"><a href="#Examples"><span class="tocnumber">3.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_.D0.A1.D1.82.D1.80.D0.BE.D0.BA.D0.B8"><span class="tocnumber">4</span> <span class="toctext">Выборка(SELECT) Строки</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_2"><span class="tocnumber">4.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#SELECT_a_Column"><span class="tocnumber">5</span> <span class="toctext">SELECT a Column</span></a>
<ul>
<li class="toclevel-2"><a href="#Examples_2"><span class="tocnumber">5.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_Generic_Results"><span class="tocnumber">6</span> <span class="toctext">Выборка(SELECT) Generic Results</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_3"><span class="tocnumber">6.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.92.D1.81.D1.82.D0.B0.D0.B2.D0.BA.D0.B0.28INSERT.29_.D1.81.D1.82.D1.80.D0.BE.D0.BA"><span class="tocnumber">7</span> <span class="toctext">Вставка(INSERT) строк</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_4"><span class="tocnumber">7.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#UPDATE_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8"><span class="tocnumber">8</span> <span class="toctext">UPDATE строки</span></a>
<ul>
<li class="toclevel-2"><a href="#Examples_3"><span class="tocnumber">8.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.BE.D0.B2_.D0.BE.D1.82_.D0.90.D1.82.D0.B0.D0.BA_.D1.82.D0.B8.D0.BF.D0.B0_SQL_Injection"><span class="tocnumber">9</span> <span class="toctext">Защита Запросов от Атак типа SQL Injection</span></a>
<ul>
<li class="toclevel-2"><a href="#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_5"><span class="tocnumber">9.1</span> <span class="toctext">Примеры</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Show_and_Hide_SQL_Errors"><span class="tocnumber">10</span> <span class="toctext">Show and Hide SQL Errors</span></a></li>
<li class="toclevel-1"><a href="#Getting_Column_Information"><span class="tocnumber">11</span> <span class="toctext">Getting Column Information</span></a></li>
<li class="toclevel-1"><a href="#Clearing_the_Cache"><span class="tocnumber">12</span> <span class="toctext">Clearing the Cache</span></a></li>
<li class="toclevel-1"><a href="#Class_Variables"><span class="tocnumber">13</span> <span class="toctext">Class Variables</span></a>
<ul>
<li class="toclevel-2"><a href="#Multi-Site_Variables"><span class="tocnumber">13.1</span> <span class="toctext">Multi-Site Variables</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Tables"><span class="tocnumber">14</span> <span class="toctext">Tables</span></a>
<ul>
<li class="toclevel-2"><a href="#Multisite_Tables"><span class="tocnumber">14.1</span> <span class="toctext">Multisite Tables</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Related"><span class="tocnumber">15</span> <span class="toctext">Related</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name=".D0.92.D0.B7.D0.B0.D0.B8.D0.BC.D0.BE.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D0.B5_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85" id=".D0.92.D0.B7.D0.B0.D0.B8.D0.BC.D0.BE.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D0.B5_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></a><h2> <span class="mw-headline"> Взаимодействие с базами данных </span></h2>
<p>WordPress предоставляет класс функций для всех манипуляций с базами данных.  Данный класс называется <code>wpdb</code> и основан на <a href="http://justinvincent.com/ezsql" class="external text" title="http://justinvincent.com/ezsql">ezSQL</a> свободном классе, написанном и поддерживаемом <a href="http://www.jvmultimedia.com" class="external text" title="http://www.jvmultimedia.com">Justin Vincent</a>.
</p>
<a name=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.24wpdb_Object" id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.24wpdb_Object"></a><h3> <span class="mw-headline"> Использование $wpdb Object </span></h3>
<p><b>Методы класса <code>wpdb()</code> не должны вызываться напрямую.</b> 
</p><p>WordPress предоставляет глобальную переменную, <b><code>$wpdb</code></b>, которая является экземпляром уже настроенного класса для обращения с базами данных WordPress.  Всегда используйте глобальную переменную <code>$wpdb</code>.  (Не забудьте про <a href="http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global" class="external text" title="http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.global">глобализацию</a> <code>$wpdb</code> когда используете её в каких либо пользовательских функциях.)
</p><p>Объект <code>$wpdb</code> может использоваться для чтения данных из <i>любой</i> таблицы в базе данных WordPress (например пользовательские таблицы), а не только стандартных таблиц которые создаёт WordPress. Например для выборки(запроса SELECT) некоторой информации из пользовательской таблицы названной "mytable", вы можете сделать следующее:
<code>
</p>
<pre>$myrows = $wpdb-&gt;<a href="#SELECT_Generic_Results" title="">get_results</a>( "SELECT id, name FROM mytable" );
</pre>
<p></code>
Объект <code>$wpdb</code> может обращаться с любым количеством таблиц, но только одной базой данных - базой данных WordPress.  В редких случаях, если вам понадобится подключится к другой базе данных, вам придётся создать экземпляр нового объекта из класса <code>wpdb</code> с соответствующими подробностями соединения для пользовательской базы данных.  Для чрезвычайно сложных установок с множеством баз данных, рассмотрите возможность использования <a href="http://wordpress.org/extend/plugins/hyperdb/" class="external text" title="http://wordpress.org/extend/plugins/hyperdb/">hyperdb</a>.
</p>
<a name=".D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.91.D0.B0.D0.B7.D0.B5_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85" id=".D0.9F.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.91.D0.B0.D0.B7.D0.B5_.D0.94.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></a><h2> <span class="mw-headline"> Произвольные Запросы к Базе Данных </span></h2>
<p>Функция <code>query</code> позволяет вам выполнить <i>любой</i> SQL запрос к базе данных WordPress.  Однако, лучше использовать более специфичные функции(смотрите ниже) для SELECT запросов.
<code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> query&nbsp;</dt><dd> (string) SQL запрос который вы хотите выполнить.
</dd></dl>
<p>Функция возвращает целое число, соответствующее количеству затронутых/выбранных строк.  При ошибке MySQL функция возвращает <code>FALSE</code>.  (<b>Замечание</b>: поскольку 0 и FALSE могут возвратится, убедитесь, что вы используете корректный оператор сравнения: equality(равенство) <code>==</code> против identicality(идентично) <code>===</code>).
</p><p>Замечание: Как и во всех функциях данного класса которые выполняют SQL запросы, вы должны экранировать весь SQL ввод(e.g., <code>wpdb-&gt;escape($user_entered_data_string)</code>).  См. раздел <a href="http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks" class="external text" title="http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks">Protect Queries Against SQL Injection Attacks</a> ниже.
</p>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"></a><h3> <span class="mw-headline"> Примеры </span></h3>
<p>Удаление мета ключа 'gargle' и значения из Post 13. (Мы добавили метод 'prepare' чтобы быть уверенными, что мы не имеем дело с недопустимой операцией или символами):
</p>
<pre>
$wpdb-&gt;query( 
	$wpdb-&gt;prepare( 
		&quot;
                DELETE FROM $wpdb-&gt;postmeta
		 WHERE post_id =&nbsp;%d
		 AND meta_key =&nbsp;%s
		&quot;,
	        13, 'gargle' 
        )
);

</pre>
<p><i>Performed in WordPress by <code><a href="/Function_Reference/delete_post_meta" title="Function Reference/delete post meta">delete_post_meta()</a></code>.</i>
</p><p><br />
Сделать страницу 7 родительской для страницы 15 <a href="/Pages" title="Pages">Page</a>.
</p>
<pre>
$wpdb-&gt;query(
	&quot;
	UPDATE $wpdb-&gt;posts 
	SET post_parent = 7
	WHERE ID = 15 
		AND post_status = 'static'
	&quot;
);
</pre>
<a name="SELECT_a_Variable" id="SELECT_a_Variable"></a><h2> <span class="mw-headline"> SELECT a Variable </span></h2>
<p>The <code>get_var</code> function returns a single variable from the database.  Though only one variable is returned, the entire result of the query is cached for later use. Returns <tt>NULL</tt> if no result is found.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">,</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> query&nbsp;</dt><dd> (string) The query you wish to run.  Setting this parameter to <code>null</code> will return the specified variable from the cached results of the previous query.
</dd><dt> column_offset&nbsp;</dt><dd> (integer) The desired column (<b>0</b> being the first).  Defaults to <b>0</b>.
</dd><dt> row_offset&nbsp;</dt><dd> (integer) The desired row (<b>0</b> being the first).  Defaults to <b>0</b>.
</dd></dl>
<a name="Examples" id="Examples"></a><h3> <span class="mw-headline"> Examples </span></h3>
<p>Retrieve and display the number of users.
</p>
<pre>
&lt;?php
$user_count = $wpdb-&gt;get_var( &quot;SELECT COUNT(*) FROM $wpdb-&gt;users&quot; );
echo &quot;&lt;p&gt;User count is {$user_count}&lt;/p&gt;&quot;;
?&gt;
</pre>
<p>Retrieve and display the sum of a <a href="/Custom_Fields" title="Custom Fields">Custom Field value</a>.
</p>
<pre>
&lt;?php
// set the meta_key to the appropriate custom field meta key
$meta_key = 'miles';
$allmiles = $wpdb-&gt;get_var( $wpdb-&gt;prepare( 
	&quot;
		SELECT sum(meta_value) 
		FROM $wpdb-&gt;postmeta 
		WHERE meta_key =&nbsp;%s
	&quot;, 
	$meta_key
) );
echo &quot;&lt;p&gt;Total miles is {$allmiles}&lt;/p&gt;&quot;;
?&gt; 
</pre>
<a name=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_.D0.A1.D1.82.D1.80.D0.BE.D0.BA.D0.B8" id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_.D0.A1.D1.82.D1.80.D0.BE.D0.BA.D0.B8"></a><h2> <span class="mw-headline"> Выборка(SELECT) Строки </span></h2>
<p>Чтобы извлечь целую строку из запроса, используйте <code>get_row</code>.  Функция может возвращать строки как объект, ассоциативный массив или как численно индексированный массив.  Если в запросе возвращается более чем одна строка, только указанная строка будет возвращена в функции, но все строки будут прокэшированны для дальнейшего использования. Возвращает ОБЪЕКТ содержащий NULL если результат не определён, учитывайте это когда используете возвращённую переменную в качестве аргумента, смотрите пример ниже.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_row</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">row_offset</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> query&nbsp;</dt><dd> (string) Запрос который вы хотите выполнить.
</dd><dt> output_type&nbsp;</dt><dd> Одна из трёх предопределённых констант.  По умолчанию OBJECT.
<ul><li> OBJECT - результат выводится как объект.
</li><li> ARRAY_A - результат выводится как ассоциативный массив.
</li><li> ARRAY_N - результат выводится как численно индексированный массив.
</li></ul>
</dd></dl>
<dl><dt> row_offset&nbsp;</dt><dd> (integer) Требуемая строка (<b>0</b> является первой).  По умолчанию <b>0</b>.
</dd></dl>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_2" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_2"></a><h3> <span class="mw-headline"> Примеры </span></h3>
<p>Получение всей информации об Link 10.
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10");
</pre>
<p>Свойствами объекта <code>$mylink</code>  являются имена столбцов полученные в результате SQL запроса (в данном примере все столбцы из таблицы <code>$wpdb-&gt;links</code>, но вы также можете запросить только определённые столбцы).
</p>
<pre>echo $mylink-&gt;link_id; // prints "10"
</pre>
<p>в противоположность этому, использование
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_A);
</pre>
<p>выведет результат в качестве ассоциативного массива:
</p>
<pre>echo $mylink['link_id']; // prints "10"
</pre>
<p>или
</p>
<pre>$mylink = $wpdb-&gt;get_row("SELECT * FROM $wpdb-&gt;links WHERE link_id = 10", ARRAY_N);
</pre>
<p>численно индексированного массива:
</p>
<pre>echo $mylink[1]; // prints "10"
</pre>
<p>Если записи с ID 10 не существует в данной таблице, будет возвращено <code>null</code>. Следующее может быть ложным:
</p>
<pre>
if ($mylink&nbsp;!= null) {
  // какие-либо действия с ссылкой 
  return true;
} else {
  // ссылка не найдена
  return false;
}
</pre>
<a name="SELECT_a_Column" id="SELECT_a_Column"></a><h2> <span class="mw-headline"> SELECT a Column </span></h2>
<p>To SELECT a column, use <code>get_col</code>.  This function outputs a one dimensional array.  If more than one column is returned by the query, only the specified column will be returned by the function, but the entire result is cached for later use. Returns an empty array if no result is found. 
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,</span><span style="color: #0000BB">column_offset</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> query&nbsp;</dt><dd> (string) the query you wish to execute.  Setting this parameter to <code>null</code> will return the specified column from the cached results of the previous query.
</dd><dt> column_offset&nbsp;</dt><dd> (integer) The desired column (<b>0</b> being the first).  Defaults to <b>0</b>.
</dd></dl>
<a name="Examples_2" id="Examples_2"></a><h3> <span class="mw-headline"> Examples </span></h3>
<p>For this example, assume the blog is devoted to information about automobiles.  Each post describes a particular car (e.g. 1969 Ford Mustang), and three <a href="/Custom_Fields" title="Custom Fields">Custom Fields</a>, manufacturer, model, and year, are assigned to each post.  This example will display the post titles, filtered by a particular manufacturer (Ford), and sorted by model and year.  
</p><p>The <b>get_col</b> form of the <tt>wpdb Class</tt> is used to return an array of all the post ids meeting the criteria and sorted in the correct order.  Then a <i>foreach</i> construct is used to iterate through that array of post ids, displaying the title of each post.  Note that the SQL for this example was created by <a href="http://stackoverflow.com/questions/1690762/complicated-mysql-query/1690808#1690808" class="external text" title="http://stackoverflow.com/questions/1690762/complicated-mysql-query/1690808#1690808">Andomar</a>.
</p>
<pre>
&lt;?php 
$meta_key1		= 'model';
$meta_key2		= 'year';
$meta_key3		= 'manufacturer';
$meta_key3_value	= 'Ford';

$postids=$wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	&quot;
	SELECT      key3.post_id
	FROM        $wpdb-&gt;postmeta key3
	INNER JOIN  $wpdb-&gt;postmeta key1 
	            ON key1.post_id = key3.post_id
	            AND key1.meta_key =&nbsp;%s 
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key3.post_id
	            AND key2.meta_key =&nbsp;%s
	WHERE       key3.meta_key =&nbsp;%s 
	            AND key3.meta_value =&nbsp;%s
	ORDER BY    key1.meta_value, key2.meta_value
	&quot;,
	$meta_key1, 
	$meta_key2, 
	$meta_key3, 
	$meta_key3_value
) ); 

if ( $postids ) 
{
	echo &quot;List of {$meta_key3_value}(s), sorted by {$meta_key1}, {$meta_key2}&quot;;
	foreach ( $postids as $id ) 
	{ 
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href=&quot;&lt;?php the_permalink()&nbsp;?&gt;&quot; rel=&quot;bookmark&quot; title=&quot;Permanent Link to &lt;?php the_title_attribute();&nbsp;?&gt;&quot;&gt;
				&lt;?php the_title();&nbsp;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	} 
}
?&gt;
</pre>
<p>This example lists all posts that contain a particular custom field, but sorted by the value of a second custom field.
</p>
<pre>
&lt;?php
// List all posts with custom field Color, sorted by the value of custom field Display_Order
// does not exclude any 'post_type'
// assumes each post has just one custom field for Color, and one for Display_Order
$meta_key1 = 'Color';
$meta_key2 = 'Display_Order';

$postids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( 
	&quot;
	SELECT      key1.post_id
	FROM        $wpdb-&gt;postmeta key1
	INNER JOIN  $wpdb-&gt;postmeta key2
	            ON key2.post_id = key1.post_id
	            AND key2.meta_key =&nbsp;%s
	WHERE       key1.meta_key =&nbsp;%s
	ORDER BY    key2.meta_value+(0) ASC
	&quot;,
        $meta_key2,
	$meta_key1
) ); 

if ( $postids ) 
{
	echo &quot;List of {$meta_key1} posts, sorted by {$meta_key2}&quot;;
	foreach ( $postids as $id ) 
	{
		$post = get_post( intval( $id ) );
		setup_postdata( $post );
		?&gt;
		&lt;p&gt;
			&lt;a href=&quot;&lt;?php the_permalink()&nbsp;?&gt;&quot; rel=&quot;bookmark&quot; title=&quot;Permanent Link to &lt;?php the_title_attribute();&nbsp;?&gt;&quot;&gt;
				&lt;?php the_title();&nbsp;?&gt;
			&lt;/a&gt;
		&lt;/p&gt;
		&lt;?php
	}
}
?&gt;
</pre>
<a name=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_Generic_Results" id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80.D0.BA.D0.B0.28SELECT.29_Generic_Results"></a><h2> <span class="mw-headline"> Выборка(SELECT) Generic Results </span></h2>
<p>Generic, mulitple row results can be pulled from the database с помощью <code>get_results</code>.  Функция возвращает весь результат запроса как массив, или <tt>NULL</tt> если результат отсутствует.  Каждый элемент данного массива соответствует одной строке результата запроса и, подобно <code>get_row</code>, может быть ОБЪЕКТОМ, ассоциативным массивом, или целочисленным массивом.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_results</span><span style="color: #007700">(</span><span style="color: #DD0000">'query'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">output_type</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> query&nbsp;</dt><dd> (string) Запрос который вы хотите выполнить.  При выставлении этого параметра как <code>null</code> функция вернёт данные из кэшированного результата предыдущего запроса.
</dd><dt> output_type&nbsp;</dt><dd> Одна из четырёх предопределённых констант.  По умолчанию - OBJECT.  Смотрите <a href="#SELECT_a_Row" title="">Выборка(SELECT) Строки</a> и примеры для подробной информации.
<ul><li> OBJECT - результат будет выводиться как численно индексированный массив объектов строк.
</li><li> OBJECT_K - результат будет выводиться как ассоциативный массив объектов строк, используя значения первого столбца в качестве ключей (дубликаты будут проигнорированы).
</li><li> ARRAY_A - результат будет выводиться как численно индексированный массив ассоциативных массивов, используя имена столбцов в качестве ключей.
</li><li> ARRAY_N - результат будет выводиться как численно индексированный массив численно индексированных массивов.
</li></ul>
</dd></dl>
<p>Поскольку эта функция использует функцию '$wpdb-&gt;query()' все переменные класса установлены правильно. 
The results count for a 'SELECT' query will be stored in $wpdb-&gt;num_rows.
</p>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_3" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_3"></a><h3> <span class="mw-headline"> Примеры </span></h3>
<p>Получение ID и Заголовков всех Черновиков Пользователя с ID 5 и Вывод Заголовков.
</p>
<pre>
$fivesdrafts = $wpdb-&gt;get_results( 
	&quot;
	SELECT ID, post_title 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	&quot;
);

foreach ( $fivesdrafts as $fivesdraft ) 
{
	echo $fivesdraft-&gt;post_title;
}
</pre>
<p>Получение всей информации о черновиках Пользователя с ID 5.
</p>
<pre>
&lt;?php
$fivesdrafts = $wpdb-&gt;get_results( 
	&quot;
	SELECT * 
	FROM $wpdb-&gt;posts
	WHERE post_status = 'draft' 
		AND post_author = 5
	&quot;
);
if ( $fivesdrafts )
{
	foreach ( $fivesdrafts as $post )
	{
		setup_postdata( $post );
		?&gt;
		&lt;h2&gt;
			&lt;a href=&quot;&lt;?php the_permalink();&nbsp;?&gt;&quot; rel=&quot;bookmark&quot; title=&quot;Permalink: &lt;?php the_title();&nbsp;?&gt;&quot;&gt;
				&lt;?php the_title();&nbsp;?&gt;
			&lt;/a&gt;
		&lt;/h2&gt;
		&lt;?php
	}
	else
	{
		?&gt;
		&lt;h2&gt;Not Found&lt;/h2&gt;
		&lt;?php
	}
}
?&gt;
</pre>
<a name=".D0.92.D1.81.D1.82.D0.B0.D0.B2.D0.BA.D0.B0.28INSERT.29_.D1.81.D1.82.D1.80.D0.BE.D0.BA" id=".D0.92.D1.81.D1.82.D0.B0.D0.B2.D0.BA.D0.B0.28INSERT.29_.D1.81.D1.82.D1.80.D0.BE.D0.BA"></a><h2> <span class="mw-headline"> Вставка(INSERT) строк </span></h2>
<p>Вставка строки в таблицу.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> table&nbsp;</dt><dd> (string) Имя таблицы для вставки.
</dd><dt> data&nbsp;</dt><dd> (array) Данные для вставки (в паре "столбец =&gt; значение"). Данные столбец и значение должны быть "сырыми" (не должны быть экранированы).
</dd><dt> format&nbsp;</dt><dd> (array|string) (не обязательно) Множество форматов для сопоставления с каждым из значений в $data. Если строка - этот формат будет использоваться для всех значений в $data. Если опущено - все значения в $data будут обрабатываться как строки если иное не предусмотрено в wpdb::$field_types.
</dd></dl>
<p>Возможные значения 'format':&nbsp;%s как строка;&nbsp;%d как десятичное число; и&nbsp;%f как число с плавающей точкой.
</p><p>После вставки, сгенерированный ID для столбца AUTO_INCREMENT может быть доступно с:
</p>
 <pre>$wpdb-&gt;insert_id</pre>
<p>Эта функция возвращает false если строка не может быть вставлена.
</p>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_4" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_4"></a><h3> <span class="mw-headline"> Примеры </span></h3>
<p>Вставка двух столбцов в строку, первое значение является строкой, а второе - числом:
</p>
<pre>
$wpdb-&gt;insert( 
	'table', 
	array( 
		'column1' =&gt; 'value1', 
		'column2' =&gt; 123 
	), 
	array( 
		'%s', 
		'%d' 
	) 
);
</pre>
<a name="UPDATE_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8" id="UPDATE_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8"></a><h2> <span class="mw-headline"> UPDATE строки </span></h2>
<p>Обновление строки в таблице. Возвращает false при ошибке или номер обновлённой строки при успешном обновлении.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$table</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$where</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$where_format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> table&nbsp;</dt><dd> (string) Имя таблицы для обновления.
</dd><dt> data&nbsp;</dt><dd> (array) Данные для обновления (в паре столбец =&gt; значение).  $data столбец и $data значение должны быть "сырыми" (не должны быть экранированы).
</dd><dt> where&nbsp;</dt><dd> (array) A named array of WHERE clauses (in column =&gt; value pairs). Multiple clauses will be joined with ANDs. Both $where columns and $where values should be "raw".
</dd><dt> format&nbsp;</dt><dd> (array|string) (optional) An array of formats to be mapped to each of the values in $data. If string, that format will be used for all of the values in $data.
</dd><dt> where_format&nbsp;</dt><dd> (array|string) (optional) An array of formats to be mapped to each of the values in $where. If string, that format will be used for all of the items in $where.
</dd></dl>
<p><strong>Possible format values</strong>:&nbsp;%s as string;&nbsp;%d as decimal number and&nbsp;%f as float. If omitted, all values in $where will be treated as strings.
</p><p>This function returns the number of rows updated, or false if there is an error.
</p>
<a name="Examples_3" id="Examples_3"></a><h3> <span class="mw-headline"> Examples </span></h3>
<p>Update a row, where the ID is 1, the value in the first column is a string and the value in the second column is a number: 
</p>
<pre>
$wpdb-&gt;update( 
	'table', 
	array( 
		'column1' =&gt; 'value1',	// string
		'column2' =&gt; 'value2'	// integer (number) 
	), 
	array( 'ID' =&gt; 1 ), 
	array( 
		'%s',	// value1
		'%d'	// value2
	), 
	array( '%d' ) 
);
</pre>
<p><strong>Attention:</strong> <code>%d</code> can't deal with comma values - if you're <em>not</em> using full numbers, use string/%s.
</p>
<a name=".D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.BE.D0.B2_.D0.BE.D1.82_.D0.90.D1.82.D0.B0.D0.BA_.D1.82.D0.B8.D0.BF.D0.B0_SQL_Injection" id=".D0.97.D0.B0.D1.89.D0.B8.D1.82.D0.B0_.D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.BE.D0.B2_.D0.BE.D1.82_.D0.90.D1.82.D0.B0.D0.BA_.D1.82.D0.B8.D0.BF.D0.B0_SQL_Injection"></a><h2> <span class="mw-headline"> Защита Запросов от Атак типа SQL Injection </span></h2>
<p>Для более полного обзора SQL экранирования в WordPress, смотрите <a href="/Data_Validation#Database" title="Data Validation">database Data Validation</a>. Эта статья <a href="/Data_Validation" title="Data Validation">Data Validation</a> является <b>must-read</b> для каждого автора кода и плагинов для WordPress.
</p><p>Все данные в SQL запросе должны быть экранированы прежде чем SQL запрос будет выполнен чтобы предотвратить атаки SQL injection. Это может быть удобно выполнено с помощью метода <code>prepare</code>, который поддерживает как <a href="http://php.net/sprintf" class="external text" title="http://php.net/sprintf">sprintf()</a>-подобный, так и <a href="http://php.net/vsprintf" class="external text" title="http://php.net/vsprintf">vsprintf()</a>-подобный синтаксис.
</p><p><b>Обратите внимание</b>: По состоянию на версию <a href="/Version_3.5" title="Version 3.5">3.5</a>, <tt>wpdb::prepare()</tt> навязывает <b>минимум 2 аргумента</b>. [<a href="http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/" class="external text" title="http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/">подробная информация</a>]
</p>
<pre>
&lt;?php $sql = $wpdb-&gt;prepare( 'query' , value_parameter[, value_parameter ... ] );&nbsp;?&gt;
</pre>
<dl><dt> query&nbsp;</dt><dd> (string) SQL запрос который вы хотите выполнить, с заполнителями <code>%s</code> и <code>%d</code>. Другие <code>%</code> символы могут вызвать ошибку обработки, если они не экранированы. Все символы <code>%</code> внутри строкового литерала SQL, включая LIKE шаблоны, должны быть продублированы(<code>%%</code>).
</dd><dt> value_parameter&nbsp;</dt><dd> (int|string|array) Значения подставляемые в заполнители. Many values may be passed by simply passing more arguments in a <a href="http://php.net/sprintf" class="external text" title="http://php.net/sprintf">sprintf()</a>-like fashion. Alternatively the second argument can be an array containing the values as in PHP's <a href="http://php.net/vsprintf" class="external text" title="http://php.net/vsprintf">vsprintf()</a> function. Необходимо соблюдать осторожность, чтобы не допустить прямого ввода пользователем данного параметра, который бы позволил манипулировать массивом любого запроса с несколькими заполнителями. Значения не должны быть уже экранированы.
</dd></dl>
<a name=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_5" id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_5"></a><h3> <span class="mw-headline">Примеры</span></h3>
<p>Add Meta key =&gt; value pair "Harriet's Adages" =&gt; "WordPress' database interface is like Sunday Morning: Easy." to Post 10.
</p>
<pre>
$metakey	= &quot;Harriet's Adages&quot;;
$metavalue	= &quot;WordPress' database interface is like Sunday Morning: Easy.&quot;;

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	&quot;
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&nbsp;%d,&nbsp;%s,&nbsp;%s )
	&quot;, 
        10, 
	$metakey, 
	$metavalue 
) );
</pre>
<p><i>Performed in WordPress by <code><a href="/Function_Reference/add_meta" title="Function Reference/add meta">add_meta()</a></code>.</i>
</p><p>The same query using <a href="http://php.net/vsprintf" class="external text" title="http://php.net/vsprintf">vsprintf()</a>-like syntax.
</p>
<pre>
$metakey = &quot;Harriet's Adages&quot;;
$metavalue = &quot;WordPress' database interface is like Sunday Morning: Easy.&quot;;

$wpdb-&gt;query( $wpdb-&gt;prepare( 
	&quot;
		INSERT INTO $wpdb-&gt;postmeta
		( post_id, meta_key, meta_value )
		VALUES (&nbsp;%d,&nbsp;%s,&nbsp;%s )
	&quot;, 
        array(
		10, 
		$metakey, 
		$metavalue
	) 
) );
</pre>
<p><i>Note that in this example we pack the values together in an array. This can be useful when we don't know the number of arguments we need to pass until runtime.</i>
</p><p>Notice that you do not have to worry about quoting strings. Instead of passing the variables directly into the SQL query, use a <code>%s</code> placeholder for strings and a <code>%d</code> placedolder for integers. You can pass as many values as you like, each as a new parameter in the <code>prepare()</code> method.
</p><p><strong>Attention:</strong> You can't pass integers/numbers that have comma values via <code>%d</code>. If you need comma values, use <code>%s</code> instead.
</p>
<a name="Show_and_Hide_SQL_Errors" id="Show_and_Hide_SQL_Errors"></a><h2> <span class="mw-headline"> Show and Hide SQL Errors </span></h2>
<p>You can turn error echoing on and off with the <code>show_errors</code> and <code>hide_errors</code>, respectively.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show_errors</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;<br />&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hide_errors</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p><p>You can also print the error (if any) generated by the most recent query with <code>print_error</code>.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">print_error</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p><p><strong>Note:</strong>  If you are running WordPress Multisite, you must define the DIEONDBERROR constant for database errors to display like so:
<br /><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;define</span><span style="color: #007700">(&nbsp;</span><span style="color: #DD0000">'DIEONDBERROR'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<a name="Getting_Column_Information" id="Getting_Column_Information"></a><h2> <span class="mw-headline"> Getting Column Information </span></h2>
<p>You can retrieve information about the columns of the most recent query result with <code>get_col_info</code>.  This can be useful when a function has returned an OBJECT whose properties you don't know.  The function will output the desired information from the specified column, or an array with information on <i>all</i> columns from the query result if no column is specified.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_col_info</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">offset</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p>
<dl><dt> type&nbsp;</dt><dd> (string) What information you wish to retrieve.  May take on any of the following values (list taken from the <a href="http://jvmultimedia.com/docs/ezsql/ez_sql_help.htm" class="external text" title="http://jvmultimedia.com/docs/ezsql/ez_sql_help.htm">ezSQL docs</a>).  Defaults to <b>name</b>.
<ul><li>name - column name.  Default.
</li><li>table - name of the table the column belongs to
</li><li>max_length - maximum length of the column
</li><li>not_null - 1 if the column cannot be NULL
</li><li>primary_key - 1 if the column is a primary key
</li><li>unique_key - 1 if the column is a unique key
</li><li>multiple_key - 1 if the column is a non-unique key
</li><li>numeric - 1 if the column is numeric
</li><li>blob - 1 if the column is a BLOB
</li><li>type - the type of the column
</li><li>unsigned - 1 if the column is unsigned
</li><li>zerofill - 1 if the column is zero-filled
</li></ul>
</dd></dl>
<dl><dt> offset&nbsp;</dt><dd> (integer) Specify the column from which to retrieve information (with <b>0</b> being the first column).  Defaults to <b>-1</b>.
<ul><li>-1 - Retrieve information from all columns.  Output as array.  Default.
</li><li>Non-negative integer - Retrieve information from specified column (<b>0</b> being the first).
</li></ul>
</dd></dl>
<a name="Clearing_the_Cache" id="Clearing_the_Cache"></a><h2> <span class="mw-headline"> Clearing the Cache </span></h2>
<p>You can clear the SQL result cache with <code>flush</code>.
</p><p><code><span style="color: #000000">
&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;$wpdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">flush</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;</span>
</code>
</p><p>This clears <code>$wpdb-&gt;last_result</code>, <code>$wpdb-&gt;last_query</code>, and <code>$wpdb-&gt;col_info</code>.
</p>
<a name="Class_Variables" id="Class_Variables"></a><h2> <span class="mw-headline"> Class Variables </span></h2>
<dl><dt> $show_errors&nbsp;</dt><dd> Whether or not <a href="#Show_and_Hide_SQL_Errors" title="">Error echoing</a> is turned on.  Defaults to TRUE.
</dd></dl>
<dl><dt> $num_queries&nbsp;</dt><dd> The number of queries that have been executed.
</dd></dl>
<dl><dt> $last_query&nbsp;</dt><dd> The most recent query to have been executed.
</dd></dl>
<dl><dt> $last_error&nbsp;</dt><dd> The most recent error text generated by MySQL.
</dd></dl>
<dl><dt> $queries&nbsp;</dt><dd> You may save all of the queries run on the database and their stop times by setting the SAVEQUERIES constant to TRUE (this constant defaults to FALSE).  If SAVEQUERIES is TRUE, your queries will be stored in this variable as an array.
</dd></dl>
<dl><dt> $last_result&nbsp;</dt><dd> The most recent query results.
</dd></dl>
<dl><dt> $col_info&nbsp;</dt><dd> The column information for the most recent query results.  See <a href="#Getting_Column_Information" title="">Getting Column Information</a>.
</dd></dl>
<dl><dt> $insert_id&nbsp;</dt><dd> ID generated for an AUTO_INCREMENT column by the most recent INSERT query.
</dd></dl>
<dl><dt> $num_rows&nbsp;</dt><dd> The number of rows returned by the last query.
</dd></dl>
<dl><dt> $prefix&nbsp;</dt><dd> The assigned WordPress table prefix for the site.
</dd></dl>
<dl><dt> $base_prefix&nbsp;</dt><dd> The original prefix as defined in wp-config.php. For multi-site: Use if you want to get the prefix without the blog number appended.
</dd></dl>
<a name="Multi-Site_Variables" id="Multi-Site_Variables"></a><h3> <span class="mw-headline"> Multi-Site Variables </span></h3>
<p>If you are using Multi-Site, you also have access to the following:
</p>
<dl><dt> $blogid&nbsp;</dt><dd>  The id of the current site (blog).
</dd></dl>
<a name="Tables" id="Tables"></a><h2> <span class="mw-headline"> Tables </span></h2>
<p>The WordPress database tables are easily referenced in the <code>wpdb</code> class.
</p>
<dl><dt> $posts&nbsp;</dt><dd> The table of <a href="/Database_Description#Table:_wp_posts" title="Database Description">Posts</a>.
</dd></dl>
<dl><dt> $postmeta&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_postmeta" title="Database Description">Meta Content</a> (a.k.a. <a href="/Custom_Fields" title="Custom Fields">Custom Fields</a>) table.
</dd></dl>
<dl><dt> $comments&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_comments" title="Database Description">Comments</a> table.
</dd></dl>
<dl><dt> $commentmeta&nbsp;</dt><dd> The table contains additional comment information.
</dd></dl>
<dl><dt> $terms&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_terms" title="Database Description">terms</a> table contains the 'description' of Categories, Link Categories, Tags.
</dd></dl>
<dl><dt> $term_taxonomy&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_term_taxonomy" title="Database Description">term_taxonomy</a> table describes the various taxonomies (classes of terms).  Categories, Link Categories, and Tags are taxonomies.
</dd></dl>
<dl><dt> $term_relationships&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_term_relationships" title="Database Description">term relationships</a> table contains link between the term and the object that uses that term, meaning this file point to each Category used for each Post.
</dd></dl>
<dl><dt> $users&nbsp;</dt><dd> The table of <a href="/Database_Description#Table:_wp_users" title="Database Description">Users</a>.
</dd></dl>
<dl><dt> $usermeta&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_usermeta" title="Database Description">usermeta</a> table contains additional user information, such as nicknames, descriptions and permissions.
</dd></dl>
<dl><dt> $links&nbsp;</dt><dd> The table of <a href="/Database_Description#Table:_wp_links" title="Database Description">Links</a>.
</dd></dl>
<dl><dt> $options&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_options" title="Database Description">Options</a> table.
</dd></dl>
<a name="Multisite_Tables" id="Multisite_Tables"></a><h3> <span class="mw-headline"> Multisite Tables </span></h3>
<p>These tables are used only in multisite installations.
</p>
<dl><dt> $blogs&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_blogs" title="Database Description">Blogs</a> table contains a list of the separate blogs (sites) that have been set up within the network(s).
</dd></dl>
<dl><dt> $signups&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_signups" title="Database Description">Signups</a> table.
</dd></dl>
<dl><dt> $site&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_site" title="Database Description">Site</a> table contains a list of the networks (previously known as "sites" in WPMU) that are set up in the installation (usually there is only one site listed in this table).
</dd></dl>
<dl><dt> $sitemeta&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_sitemeta" title="Database Description">Network Options (Site Meta)</a> table contains any options that are applicable to the entire multisite installation.
</dd></dl>
<dl><dt> $sitecategories&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_sitecategories" title="Database Description">Site Categories</a> table.
</dd></dl>
<dl><dt> $registration_log&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_registration_log" title="Database Description">Registration Log</a> table.
</dd></dl>
<dl><dt> $blog_versions&nbsp;</dt><dd> The <a href="/Database_Description#Table:_wp_blog_versions" title="Database Description">Blog Versions</a> table.
</dd></dl>
<a name="Related" id="Related"></a><h2> <span class="mw-headline"> Related </span></h2>
<ul><li> Class: <a href="/Class_Reference/WP_Query" title="Class Reference/WP Query"> WP_Query</a> - Detailed overview of the WP_Query class
</li><li> Class: <a href="/Class_Reference/wpdb" title="Class Reference/wpdb">$wpdb</a> - Overview of using the $wpdb object
</li><li> Function: <a href="/Function_Reference/get_query_var" title="Function Reference/get query var"> get_query_var()</a> 
</li><li> Function: <a href="/Function_Reference/query_posts" title="Function Reference/query posts"> query_posts()</a>  - Make additional custom queries
</li><li> Function: <a href="/Function_Reference/get_posts" title="Function Reference/get posts" class="mw-redirect">get_posts()</a> - A specialized function that returns an array of posts
</li><li> Function: <a href="/Function_Reference/get_pages" title="Function Reference/get pages">get_pages()</a> - A specialized function that returns an array of pages
</li><li> Function: <a href="/Function_Reference/have_posts" title="Function Reference/have posts"> have posts()</a> - A conditional that determines if the query returned any posts
</li><li> Function: <a href="/Function_Reference/the_post" title="Function Reference/the post"> the_post()</a> - Used to automatically set up the loop after a query
</li><li> Function: <a href="/Function_Reference/rewind_posts" title="Function Reference/rewind posts"> rewind_posts()</a> - Resets the current loop
</li><li> Function: <a href="/Function_Reference/setup_postdata" title="Function Reference/setup postdata">setup_postdata()</a> - Setup query data for individual results within a loop
</li><li> Function: <a href="/Function_Reference/wp_reset_postdata" title="Function Reference/wp reset postdata"> wp_reset_postdata()</a> - Restores the previous query (usually after a loop-within-a-loop)
</li><li> Function: <a href="/Function_Reference/wp_reset_query" title="Function Reference/wp reset query"> wp_reset_query()</a>
</li><li> Function: <a href="/Function_Reference/is_main_query" title="Function Reference/is main query">is_main_query()</a> - Ensures the query being changed is only the main query
</li><li> Action Hook: <a href="/Plugin_API/Action_Reference/pre_get_posts" title="Plugin API/Action Reference/pre get posts">pre_get_posts</a> - Modify WordPress queries before they are executed
</li><li> Filter Hook: <a href="/Plugin_API/Filter_Reference/found_posts" title="Plugin API/Filter Reference/found posts">found_posts</a> - Modify the WP_Query object's found_posts value
</li><li> Tutorial: <a href="/Displaying_Posts_Using_a_Custom_Select_Query" title="Displaying Posts Using a Custom Select Query">Displaying Posts Using a Custom Select Query</a>
</li><li> Tutorial: <a href="/Making_Advanced_Taxonomy_Queries" title="Making Advanced Taxonomy Queries">Making Advanced Taxonomy Queries</a>
</li><li> Tutorial: <a href="/Making_Custom_Queries_using_Offset_and_Pagination" title="Making Custom Queries using Offset and Pagination">Making Custom Queries using Offset and Pagination</a>
</li></ul>
<div style="clear:both; background-color:#DFDFDF; border:1px solid #CCCCCC; color:#000000; padding:7px; margin:0.5em auto 0.5em auto; vertical-align:middle;">See also index of <a href="/Class_Reference" title="Class Reference">Class Reference</a> and index of <a href="/Function_Reference" title="Function Reference">Function Reference</a>.</div>

<!-- 
NewPP limit report
Preprocessor node count: 277/1000000
Post-expand include size: 4380/2097152 bytes
Template argument size: 900/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
Retrieved from "<a href="http://codex.wordpress.org/Class_Reference/ru:wpdb_Class">http://codex.wordpress.org/Class_Reference/ru:wpdb_Class</a>"</div>
				<div id="catlinks"><div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/Category:Stubs" title="Category:Stubs">Stubs</a></span> | <span dir='ltr'><a href="/Category:Classes" title="Category:Classes">Classes</a></span> | <span dir='ltr'><a href="/Category:Russian_Codex" title="Category:Russian Codex">Russian Codex</a></span></div></div></div>			<!-- end content -->
		</div>
		<div class="col-2">
			
						
			<ul class="submenu">
				<li id="n-mainpage"><a href="/Main_Page">Home Page</a></li>	
				<li><a href="/WordPress_Lessons">WordPress Lessons</a></li>
				<li><a href="/Getting_Started_with_WordPress">Getting Started</a></li>
				<li><a href="/Working_with_WordPress">Working with WordPress</a></li>
				<li><a href="/Blog_Design_and_Layout">Design and Layout</a></li>
				<li><a href="/Advanced_Topics">Advanced Topics</a></li>
				<li><a href="/Troubleshooting">Troubleshooting</a></li>
				<li><a href="/Developer_Documentation">Developer Docs</a></li>
				<li><a href="/About_WordPress">About WordPress</a></li>
			</ul>

			<h3>Codex Resources</h3>
			<ul class="submenu">
				<li id="n-portal"><a href="/Codex:Community_Portal">Community portal</a></li>	      
				<li id="n-currentevents"><a href="/Current_events">Current events</a></li>	      
				<li id="n-recentchanges"><a href="/Special:RecentChanges">Recent changes</a></li>	      
				<li id="n-randompage"><a href="/Special:Random">Random page</a></li>	      
				<li id="n-help"><a href="/Help:Contents">Help</a></li>	
			</ul>
			
		</div>
	</div>
</div>

<div id="footer">
	<div class="wrapper">
		<p> 
			<a href="http://wordpress.org/about/privacy/">Privacy</a> | 
			<a href="http://wordpress.org/about/license/">License / GPLv2</a>
            &nbsp; &nbsp; See also: 
            <a href="http://wordpress.com/?ref=wporg-footer" title="Hassle-free WP hosting">Hosted WordPress.com</a> |
			<a href="http://wordpress.tv/" title="Videos, tutorials, WordCamps">WordPress.TV Videos</a> |
			<a href="http://central.wordcamp.org/" title="Find a WordPress event near your home">WordCamp Events</a> |
			<a href="http://buddypress.org/" title="A set of plugins to transform your WordPress into a social network">BuddyPress Social Layer</a> |
			<a href="http://bbpress.org/" title="Fast, slick forums built on WordPress">bbPress Forums</a> |
			<a href="http://jobs.wordpress.net/" title="Find or post WordPress jobs">WP Jobs</a> | 
            <a href="http://ma.tt/" title="Co-founder of WordPress, an example of what WordPress can do">Matt</a>
		</p>
<br />
<iframe src="//www.facebook.com/plugins/like.php?app_id=121415197926116&amp;href=http%3A%2F%2Fwww.facebook.com%2Fwordpress&amp;send=false&amp;layout=button_count&amp;width=150&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=lucida+grande&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>
<iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/follow_button.html?screen_name=WordPress&show_count=false" style="width:150px; height:20px;"></iframe>

		<h6>Code is Poetry</h6>
	</div>
</div>


<script type="text/javascript">_qoptions={qacct:"p-18-mFEk4J448M"};</script>
<script type="text/javascript" src="//edge.quantserve.com/quant.js"></script>
<noscript><img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif" style="display: none;" border="0" height="1" width="1" alt=""/></noscript>
<!--  -->
<script type="text/javascript" src="//gravatar.com/js/gprofiles.js"></script>

<script type="text/javascript">
(function($){
$(document).ready(function() {
	$('#footer a').click(function() {
		if (this.href.indexOf('wordpress.org') == -1 && this.href.indexOf('http') == 0) {
			recordOutboundLink(this, 'Outbound Links', this.href);
			return false;
		}
	});
});
})(jQuery);
</script>
</body>
</html>

</body>
</html>

